---
title: 胶片的数字化流程——平板扫描仪扫描与校色
date: 2023-04-20 22:07:16
permalink: /pages/bfd58a/
sidebar: auto
category:
  - 随笔
tag:
  - 胶片
  - 数字化
---

## 背景

胶片作为模拟的物理介质，在当今的影像流程中需要首先进行数字化处理。然而彩色负片由于其特殊性，在数字化处理的过程中经常容易出现问题。本文将简要介绍几种彩色负片数字化的方法以及其之间的对比。

## 店扫

店扫，本文中指冲扫店直接扫描。常见冲扫店会使用富士SP-2000/SP-3000扫描仪对胶片进行扫描。作为专业级扫描设备，SP-3000具有较快的扫描速度，然而其扫描质量由于其内置去色罩预设的影响常常不能达到理想，容易出现偏色的情况，而且杂色噪点较多。因此店扫对于Gold 200、UltraMax 400之类非专业胶片扫描还可以接受，但对于Portra、Ektar等专业胶片则不太适用，因其无法准确复现胶片色彩，且分辨率也未能达到胶片的颗粒极限。

## 翻拍

另一种常用的胶片数字化方式是使用数码相机对胶片进行翻拍。该方法据称能达到较好的画质，但对光源以及翻拍所使用的镜头和相机要求较高。在没有数码相机的情况下此方法也难以实施。翻拍得到的是胶片负片的直接图像，仍需后期进行去色罩等校色处理。

## 平板扫描仪扫描

于是我们就讲到了这篇文章的重点：平板扫描仪扫描。平板扫描仪使用移动的感光元件对玻璃平板上的文档进行扫描进而得到其数字化版本。由于其扫描原理，平板扫描仪的分辨率（DPI）容易做到较高。和翻拍一样的，平板扫描仪扫描出的也是胶片负片的直接图像，仍需后期进行去色罩等校色处理，但也有较为专业的软件，如SilverFast、VueScan等，能进行自动化的校色处理，且内置一些胶片型号的预设配置，能较为简单且准确的复现胶片色彩。

### 平板扫描仪的选择

使用平板扫描仪扫描底片，首先需要选择合适的扫描仪。扫描底片所必须的条件是，扫描仪能够支持透射扫描。常见的家用一体机的扫描系统使用反射式对文档进行扫描，然而对于胶片来说，因其不能有效地向感光元件反射回正确颜色的光，只能使用透射式的扫描仪。此过程的光路和彩色放大类似，都是光源发出的光透过胶片经光学系统汇聚后到达感光元件，只是对于彩放而言感光元件是相纸，而对于扫描仪而言感光元件是CCD或CMOS。

另一个需要着重考虑的参数是扫描仪的分辨率，即DPI。作为参考，富士SP-3000的DPI大概为2400。由于奈奎斯特采样定律，采样频率应大于原始频率的2倍。由于笔者目前只使用过Kodak的专业彩色负片，因此以下的讨论以Kodak产品为例。对于专业彩色负片和电影胶片，Kodak Alaris发布了其调制传递函数（MTF）曲线。下图即为Portra 160的MTF曲线。其30%对比度大致对应50 Cycles/mm。因此对于类似的专业彩色负片，扫描仪的空间频率应达到其2倍以上，换算到DPI即至少2540DPI才能达到较好的效果。对于Kodak的民用彩色负片，因其MTF曲线并未发布，因此无法进行类似的分析，但考虑到其颗粒较大，使用2400DPI的扫描仪进行扫描应该也能达到可接受的效果。

![Portra 160 MTF Curve](/img/portra160mtf.png)

因此笔者综合多方因素使用了Canon Canoscan 4400F。该款扫描仪支持135胶片的投射扫描，且其光学分辨率能达到4800*9600DPI，同时其价格较为低廉。但是其扫描速度较慢，且一次只能扫描6张135底片或4张135幻灯片，因此对大量胶片进行扫描时较为麻烦。

### 扫描软件的选择

扫描软件同样也是需要考虑的因素。对于Canon Canoscan 4400F，其官方自带的扫描软件为Canoscan Toolbox 5.0。但由于该款扫描仪已停产多年，其官方软件的兼容性存在一定问题，且软件功能也较为简陋。目前常用的扫描软件还有SilverFast和VueScan等。这两款软件均为收费软件，SilverFast SE的售价为€49，而VueScan Professional（仅有该版本支持底片透射扫描）的售价为¥400。在试用了两款软件的Demo后，笔者最终选择了SilverFast 9 SE并购买了许可证。SilverFast SE 9支持快速的低分辨率预览，同时支持自动负片色罩去除，在4400F上能达到4800DPI的扫描分辨率。同时其本地化支持较VueScan更好，且其软件界面也更加美观。

SilverFast SE 9支持多种文件保存格式。对于去色罩处理过的图像支持24位色深的JPEG、PNG、TIFF等格式，对于原始图像支持48位色深的TIFF和DNG格式。48位TIFF格式的图像可供后期手动去色罩校色使用，能提供较高的宽容度，而自动校色的图像则可直接用于使用。

### 校色流程

负片直接扫描出的图像也是负片，同时由于彩色负片不同染料层的感光能力不同，因此直接反色后的颜色发青。所以需要进行去色罩校色处理。常用的校色方法如下：

  1. 扫描仪自动校色。该方法使用扫描仪自带的校色功能，能够自动去色罩并校色。但由于该方法使用的是扫描仪自带的校色算法，因此其校色效果并不理想，且无法进行手动调整。
  2. 扫描软件自动校色。该方法使用扫描软件自带的校色功能，能够自动去色罩并校色。扫描软件通常自带多种不同型号胶片的预设参数，且有一定手动调整空间，在效率和效果之间有较好的平衡。
  3. 手动校色。该方法使用扫描得到的原始图像在Photoshop等软件中进行处理，能够获得较好的校色效果，但需要较多的时间和精力。

由于前两种方式自动化程度较高，此处不再赘述。笔者手动校色使用V7_FilmFact的wLog流程，下面对其进行简要介绍，具体的流程可参考其[视频](https://www.bilibili.com/video/BV1w4411n7vq/)。

#### 对数域

胶片对色彩的感知和人眼一样在对数域上是线性的。目前常用的数字化图像处理工具，如Photoshop等，其处理基本都在线性域上进行。因此在手动校色时，需要将原始图像转换到对数域进行处理，完成校色后再转换回线性域，以达到正确的色彩再现效果。在Photoshop中我们可以通过查找表（LUT）对图像进行相应转换。

#### 对数域上的色罩处理

下图为Portra 160的曝光特性曲线。可以看到在双对数坐标下，三个颜色通道的曲线有很长一段线性段，且其截距和斜率都不相同。因此我们可以通过对数域下的线性的曲线操作对三个通道的曲线分别进行平移和旋转，从而达到去除色罩的效果。这一步可以通过Photoshop的曲线工具采用最大化每通道的对比度的自动方式进行处理。

![Portra 160 Characteristic Curve](/img/portra160cc.png)

#### 转回线性域后的ACR自动处理

完成对数域下的校色处理后，再使用一个LUT将其转换回线性域。转换为线性域后的图像可以使用常用数字化流程，如Adobe Camera Raw（ACR）进行后期处理。在ACR中，我们可以使用其自带的预设参数对图像进行自动处理，从而达到较好的效果。

## 效果对比

下面对不同处理方式的效果进行对比。

### 细节对比

Portra 160, SP-3000 VS CanoScan 4400F 手动校色

![Portra 160, SP-3000 VS CanoScan 4400F Manual](/img/por160comp.png)

### 色彩对比

Portra 400

SP-3000店扫

![Portra 400, SP-3000](/img/por400sp_small.jpg)

4400F，SilverFast自动校色，Portra 400 NC预设

![Portra 400, 4400F](/img/por400sf_small.jpg)

4400F，手动校色流程

![Portra 400, 4400F Manual](/img/por400man_small.jpg)
